import{aI as v}from"./vendor.5ecbfc3b.js";var fe=e=>e.type==="checkbox",se=e=>e instanceof Date,B=e=>e==null;const rr=e=>typeof e=="object";var U=e=>!B(e)&&!Array.isArray(e)&&rr(e)&&!se(e),tr=e=>U(e)&&e.target?fe(e.target)?e.target.checked:e.target.value:e,wr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,sr=(e,t)=>e.has(wr(t)),ne=e=>Array.isArray(e)?e.filter(Boolean):[],C=e=>e===void 0,c=(e,t,r)=>{if(!t||!U(e))return r;const i=ne(t.split(/[,[\].]+?/)).reduce((a,l)=>B(a)?a:a[l],e);return C(i)||i===e?C(e[t])?r:e[t]:i};const ge={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Sr=v.createContext(null),be=()=>v.useContext(Sr);var ir=(e,t,r,i=!0)=>{const a={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const g=l;return t._proxyFormState[g]!==W.all&&(t._proxyFormState[g]=!i||W.all),r&&(r[g]=!0),e[g]}});return a},I=e=>U(e)&&!Object.keys(e).length,ar=(e,t,r)=>{const{name:i,...a}=e;return I(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!r||W.all))},j=e=>Array.isArray(e)?e:[e],nr=(e,t,r)=>r&&t?e===t:!e||!t||e===t||j(e).some(i=>i&&(i.startsWith(t)||t.startsWith(i)));function ve(e){const t=v.useRef(e);t.current=e,v.useEffect(()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{r&&r.unsubscribe()}},[e.disabled])}function kr(e){const t=be(),{control:r=t.control,disabled:i,name:a,exact:l}=e||{},[g,d]=v.useState(r._formState),b=v.useRef(!0),p=v.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),F=v.useRef(a);return F.current=a,ve({disabled:i,callback:v.useCallback(_=>b.current&&nr(F.current,_.name,l)&&ar(_,p.current)&&d({...r._formState,..._}),[r,l]),subject:r._subjects.state}),v.useEffect(()=>{b.current=!0;const _=r._proxyFormState.isDirty&&r._getDirty();return _!==r._formState.isDirty&&r._subjects.state.next({isDirty:_}),r._updateValid(),()=>{b.current=!1}},[r]),ir(g,r,p.current,!1)}var J=e=>typeof e=="string",ur=(e,t,r,i)=>J(e)?(i&&t.watch.add(e),c(r,e)):Array.isArray(e)?e.map(a=>(i&&t.watch.add(a),c(r,a))):(i&&(t.watchAll=!0),r),Dr=e=>{const t=e.constructor&&e.constructor.prototype;return U(t)&&t.hasOwnProperty("isPrototypeOf")},Be=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function N(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Be&&(e instanceof Blob||e instanceof FileList))&&(r||U(e)))if(t=r?[]:{},!Array.isArray(e)&&!Dr(e))t=e;else for(const i in e)t[i]=N(e[i]);else return e;return t}function Cr(e){const t=be(),{control:r=t.control,name:i,defaultValue:a,disabled:l,exact:g}=e||{},d=v.useRef(i);d.current=i,ve({disabled:l,subject:r._subjects.watch,callback:F=>{if(nr(d.current,F.name,g)){const _=ur(d.current,r._names,F.values||r._formValues);p(C(_)?a:N(_))}}});const[b,p]=v.useState(C(a)?r._getWatch(i):a);return v.useEffect(()=>r._removeUnmounted()),b}function Er(e){const t=be(),{name:r,control:i=t.control,shouldUnregister:a}=e,l=sr(i._names.array,r),g=Cr({control:i,name:r,defaultValue:c(i._formValues,r,c(i._defaultValues,r,e.defaultValue)),exact:!0}),d=kr({control:i,name:r}),b=v.useRef(i.register(r,{...e.rules,value:g}));return v.useEffect(()=>{const p=(F,_)=>{const Q=c(i._fields,F);Q&&(Q._f.mount=_)};return p(r,!0),()=>{const F=i._options.shouldUnregister||a;(l?F&&!i._stateFlags.action:F)?i.unregister(r):p(r,!1)}},[r,i,l,a]),{field:{name:r,value:g,onChange:v.useCallback(p=>b.current.onChange({target:{value:tr(p),name:r},type:ge.CHANGE}),[r]),onBlur:v.useCallback(()=>b.current.onBlur({target:{value:c(i._formValues,r),name:r},type:ge.BLUR}),[r,i]),ref:p=>{const F=c(i._fields,r);F&&p&&(F._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:_=>p.setCustomValidity(_),reportValidity:()=>p.reportValidity()})}},formState:d,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(d.touchedFields,r)},error:{enumerable:!0,get:()=>c(d.errors,r)}})}}const Hr=e=>e.render(Er(e));var Rr=(e,t,r,i,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:a||!0}}:{},qe=e=>/^\w*$/.test(e),lr=e=>ne(e.replace(/["|']|\]/g,"").split(/\.|\[/));function D(e,t,r){let i=-1;const a=qe(t)?[t]:lr(t),l=a.length,g=l-1;for(;++i<l;){const d=a[i];let b=r;if(i!==g){const p=e[d];b=U(p)||Array.isArray(p)?p:isNaN(+a[i+1])?{}:[]}e[d]=b,e=e[d]}return e}const he=(e,t,r)=>{for(const i of r||Object.keys(e)){const a=c(e,i);if(a){const{_f:l,...g}=a;if(l&&t(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else U(g)&&he(g,t)}}};var Z=()=>{const e=typeof performance=="undefined"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},we=(e,t,r={})=>r.shouldFocus||C(r.shouldFocus)?r.focusName||`${e}.${C(r.focusIndex)?t:r.focusIndex}.`:"",Pe=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length)))),or=(e,t,r)=>{const i=ne(c(e,r));return D(i,"root",t[r]),D(e,r,i),e},ae=e=>typeof e=="boolean",We=e=>e.type==="file",_e=e=>typeof e=="function",ye=e=>J(e)||v.isValidElement(e),$e=e=>e.type==="radio",Ae=e=>e instanceof RegExp;const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var cr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!C(e[0].attributes.value)?C(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je};const Xe={isValid:!1,value:null};var fr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Xe):Xe;function Ye(e,t,r="validate"){if(ye(e)||Array.isArray(e)&&e.every(ye)||ae(e)&&!e)return{type:r,message:ye(e)?e:"",ref:t}}var te=e=>U(e)&&!Ae(e)?e:{value:e,message:""},Ie=async(e,t,r,i,a)=>{const{ref:l,refs:g,required:d,maxLength:b,minLength:p,min:F,max:_,pattern:Q,validate:k,name:P,valueAsNumber:ue,mount:G,disabled:Y}=e._f;if(!G||Y)return{};const $=g?g[0]:l,H=x=>{i&&$.reportValidity&&($.setCustomValidity(ae(x)?"":x||""),$.reportValidity())},O={},ee=$e(l),A=fe(l),m=ee||A,V=(ue||We(l))&&!l.value||t===""||Array.isArray(t)&&!t.length,S=Rr.bind(null,P,r,O),z=(x,w,T,L=X.maxLength,K=X.minLength)=>{const q=x?w:T;O[P]={type:x?L:K,message:q,ref:l,...S(x?L:K,q)}};if(a?!Array.isArray(t)||!t.length:d&&(!m&&(V||B(t))||ae(t)&&!t||A&&!cr(g).isValid||ee&&!fr(g).isValid)){const{value:x,message:w}=ye(d)?{value:!!d,message:d}:te(d);if(x&&(O[P]={type:X.required,message:w,ref:$,...S(X.required,w)},!r))return H(w),O}if(!V&&(!B(F)||!B(_))){let x,w;const T=te(_),L=te(F);if(!B(t)&&!isNaN(t)){const K=l.valueAsNumber||t&&+t;B(T.value)||(x=K>T.value),B(L.value)||(w=K<L.value)}else{const K=l.valueAsDate||new Date(t),q=de=>new Date(new Date().toDateString()+" "+de),le=l.type=="time",re=l.type=="week";J(T.value)&&t&&(x=le?q(t)>q(T.value):re?t>T.value:K>new Date(T.value)),J(L.value)&&t&&(w=le?q(t)<q(L.value):re?t<L.value:K<new Date(L.value))}if((x||w)&&(z(!!x,T.message,L.message,X.max,X.min),!r))return H(O[P].message),O}if((b||p)&&!V&&(J(t)||a&&Array.isArray(t))){const x=te(b),w=te(p),T=!B(x.value)&&t.length>x.value,L=!B(w.value)&&t.length<w.value;if((T||L)&&(z(T,x.message,w.message),!r))return H(O[P].message),O}if(Q&&!V&&J(t)){const{value:x,message:w}=te(Q);if(Ae(x)&&!t.match(x)&&(O[P]={type:X.pattern,message:w,ref:l,...S(X.pattern,w)},!r))return H(w),O}if(k){if(_e(k)){const x=await k(t),w=Ye(x,$);if(w&&(O[P]={...w,...S(X.validate,w.message)},!r))return H(w.message),O}else if(U(k)){let x={};for(const w in k){if(!I(x)&&!r)break;const T=Ye(await k[w](t),$,w);T&&(x={...T,...S(w,T.message)},H(T.message),r&&(O[P]=x))}if(!I(x)&&(O[P]={ref:$,...x},!r))return O}}return H(!0),O};function Se(e,t){return[...e,...j(t)]}var ke=e=>Array.isArray(e)?e.map(()=>{}):void 0,Ne=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched});function De(e,t,r){return[...e.slice(0,t),...j(r),...e.slice(t)]}var Ce=(e,t,r)=>Array.isArray(e)?(C(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[];function Ee(e,t){return[...j(t),...j(e)]}function Or(e,t){let r=0;const i=[...e];for(const a of t)i.splice(a-r,1),r++;return ne(i).length?i:[]}var Re=(e,t)=>C(t)?[]:Or(e,j(t).sort((r,i)=>r-i)),Oe=(e,t,r)=>{e[t]=[e[r],e[r]=e[t]][0]};function Tr(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=C(e)?i++:e[t[i++]];return e}function Ur(e){for(const t in e)if(!C(e[t]))return!1;return!0}function M(e,t){const r=qe(t)?[t]:lr(t),i=r.length==1?e:Tr(e,r),a=r[r.length-1];let l;i&&delete i[a];for(let g=0;g<r.slice(0,-1).length;g++){let d=-1,b;const p=r.slice(0,-(g+1)),F=p.length-1;for(g>0&&(l=e);++d<p.length;){const _=p[d];b=b?b[_]:e[_],F===d&&(U(b)&&I(b)||Array.isArray(b)&&Ur(b))&&(l?delete l[_]:delete e[_]),l=b}}return e}var Ze=(e,t,r)=>(e[t]=r,e);function Kr(e){const t=be(),{control:r=t.control,name:i,keyName:a="id",shouldUnregister:l}=e,[g,d]=v.useState(r._getFieldArray(i)),b=v.useRef(r._getFieldArray(i).map(Z)),p=v.useRef(g),F=v.useRef(i),_=v.useRef(!1);F.current=i,p.current=g,r._names.array.add(i),e.rules&&r.register(i,e.rules);const Q=v.useCallback(({values:A,name:m})=>{if(m===F.current||!m){const V=c(A,F.current);Array.isArray(V)&&(d(V),b.current=V.map(Z))}},[]);ve({callback:Q,subject:r._subjects.array});const k=v.useCallback(A=>{_.current=!0,r._updateFieldArray(i,A)},[r,i]),P=(A,m)=>{const V=j(N(A)),S=Se(r._getFieldArray(i),V);r._names.focus=we(i,S.length-1,m),b.current=Se(b.current,V.map(Z)),k(S),d(S),r._updateFieldArray(i,S,Se,{argA:ke(A)})},ue=(A,m)=>{const V=j(N(A)),S=Ee(r._getFieldArray(i),V);r._names.focus=we(i,0,m),b.current=Ee(b.current,V.map(Z)),k(S),d(S),r._updateFieldArray(i,S,Ee,{argA:ke(A)})},G=A=>{const m=Re(r._getFieldArray(i),A);b.current=Re(b.current,A),k(m),d(m),r._updateFieldArray(i,m,Re,{argA:A})},Y=(A,m,V)=>{const S=j(N(m)),z=De(r._getFieldArray(i),A,S);r._names.focus=we(i,A,V),b.current=De(b.current,A,S.map(Z)),k(z),d(z),r._updateFieldArray(i,z,De,{argA:A,argB:ke(m)})},$=(A,m)=>{const V=r._getFieldArray(i);Oe(V,A,m),Oe(b.current,A,m),k(V),d(V),r._updateFieldArray(i,V,Oe,{argA:A,argB:m},!1)},H=(A,m)=>{const V=r._getFieldArray(i);Ce(V,A,m),Ce(b.current,A,m),k(V),d(V),r._updateFieldArray(i,V,Ce,{argA:A,argB:m},!1)},O=(A,m)=>{const V=N(m),S=Ze(r._getFieldArray(i),A,V);b.current=[...S].map((z,x)=>!z||x===A?Z():b.current[x]),k(S),d([...S]),r._updateFieldArray(i,S,Ze,{argA:A,argB:V},!0,!1)},ee=A=>{const m=j(N(A));b.current=m.map(Z),k([...m]),d([...m]),r._updateFieldArray(i,[...m],V=>V,{},!0,!1)};return v.useEffect(()=>{if(r._stateFlags.action=!1,Pe(i,r._names)&&r._subjects.state.next({}),_.current&&(!Ne(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([i]).then(A=>{const m=c(A.errors,i),V=c(r._formState.errors,i);(V?!m&&V.type:m&&m.type)&&(m?D(r._formState.errors,i,m):M(r._formState.errors,i),r._subjects.state.next({errors:r._formState.errors}))});else{const A=c(r._fields,i);A&&A._f&&Ie(A,c(r._formValues,i),r._options.criteriaMode===W.all,r._options.shouldUseNativeValidation,!0).then(m=>!I(m)&&r._subjects.state.next({errors:or(r._formState.errors,m,i)}))}r._subjects.watch.next({name:i,values:r._formValues}),r._names.focus&&he(r._fields,A=>!!A&&A.startsWith(r._names.focus||"")),r._names.focus="",r._proxyFormState.isValid&&r._updateValid()},[g,i,r]),v.useEffect(()=>(!c(r._formValues,i)&&r._updateFieldArray(i),()=>{(r._options.shouldUnregister||l)&&r.unregister(i)}),[i,r,a,l]),{swap:v.useCallback($,[k,i,r]),move:v.useCallback(H,[k,i,r]),prepend:v.useCallback(ue,[k,i,r]),append:v.useCallback(P,[k,i,r]),remove:v.useCallback(G,[k,i,r]),insert:v.useCallback(Y,[k,i,r]),update:v.useCallback(O,[k,i,r]),replace:v.useCallback(ee,[k,i,r]),fields:v.useMemo(()=>g.map((A,m)=>({...A,[a]:b.current[m]||Z()})),[g,a])}}function Te(){let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}}var ce=e=>B(e)||!rr(e);function ie(e,t){if(ce(e)||ce(t))return e===t;if(se(e)&&se(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const a of r){const l=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const g=t[a];if(se(l)&&se(g)||U(l)&&U(g)||Array.isArray(l)&&Array.isArray(g)?!ie(l,g):l!==g)return!1}}return!0}var je=e=>{const t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},dr=e=>e.type==="select-multiple",Lr=e=>$e(e)||fe(e),Ue=e=>je(e)&&e.isConnected,yr=e=>{for(const t in e)if(_e(e[t]))return!0;return!1};function me(e,t={}){const r=Array.isArray(e);if(U(e)||r)for(const i in e)Array.isArray(e[i])||U(e[i])&&!yr(e[i])?(t[i]=Array.isArray(e[i])?[]:{},me(e[i],t[i])):B(e[i])||(t[i]=!0);return t}function gr(e,t,r){const i=Array.isArray(e);if(U(e)||i)for(const a in e)Array.isArray(e[a])||U(e[a])&&!yr(e[a])?C(t)||ce(r[a])?r[a]=Array.isArray(e[a])?me(e[a],[]):{...me(e[a])}:gr(e[a],B(t)?{}:t[a],r[a]):ie(e[a],t[a])?delete r[a]:r[a]=!0;return r}var Le=(e,t)=>gr(e,t,me(t)),hr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>C(e)?e:t?e===""?NaN:e&&+e:r&&J(e)?new Date(e):i?i(e):e;function Me(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return We(t)?t.files:$e(t)?fr(e.refs).value:dr(t)?[...t.selectedOptions].map(({value:r})=>r):fe(t)?cr(e.refs).value:hr(C(t.value)?e.ref.value:t.value,e)}var Mr=(e,t,r,i)=>{const a={};for(const l of e){const g=c(t,l);g&&D(a,l,g._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:i}},oe=e=>C(e)?e:Ae(e)?e.source:U(e)?Ae(e.value)?e.value.source:e.value:e,Br=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function er(e,t,r){const i=c(e,r);if(i||qe(r))return{error:i,name:r};const a=r.split(".");for(;a.length;){const l=a.join("."),g=c(t,l),d=c(e,l);if(g&&!Array.isArray(g)&&r!==l)return{name:r};if(d&&d.type)return{name:l,error:d};a.pop()}return{name:r}}var Pr=(e,t,r,i,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?i.isOnBlur:a.isOnBlur)?!e:(r?i.isOnChange:a.isOnChange)?e:!0,Ir=(e,t)=>!ne(c(e,t)).length&&M(e,t);const Nr={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function jr(e={}){let t={...Nr,...e},r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},a=N(t.defaultValues)||{},l=t.shouldUnregister?{}:N(a),g={action:!1,mount:!1,watch:!1},d={mount:new Set,unMount:new Set,array:new Set,watch:new Set},b,p=0;const F={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={watch:Te(),array:Te(),state:Te()},Q=Ne(t.mode),k=Ne(t.reValidateMode),P=t.criteriaMode===W.all,ue=s=>n=>{clearTimeout(p),p=window.setTimeout(s,n)},G=async()=>{if(F.isValid){const s=t.resolver?I((await m()).errors):await S(i,!0);s!==r.isValid&&(r.isValid=s,_.state.next({isValid:s}))}},Y=s=>F.isValidating&&s!==r.isValidating&&_.state.next({isValidating:s}),$=(s,n=[],u,f,y=!0,o=!0)=>{if(f&&u){if(g.action=!0,o&&Array.isArray(c(i,s))){const h=u(c(i,s),f.argA,f.argB);y&&D(i,s,h)}if(o&&Array.isArray(c(r.errors,s))){const h=u(c(r.errors,s),f.argA,f.argB);y&&D(r.errors,s,h),Ir(r.errors,s)}if(F.touchedFields&&o&&Array.isArray(c(r.touchedFields,s))){const h=u(c(r.touchedFields,s),f.argA,f.argB);y&&D(r.touchedFields,s,h)}F.dirtyFields&&(r.dirtyFields=Le(a,l)),_.state.next({name:s,isDirty:x(s,n),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else D(l,s,n)},H=(s,n)=>{D(r.errors,s,n),_.state.next({errors:r.errors})},O=(s,n,u,f)=>{const y=c(i,s);if(y){const o=c(l,s,C(u)?c(a,s):u);C(o)||f&&f.defaultChecked||n?D(l,s,n?o:Me(y._f)):L(s,o),g.mount&&G()}},ee=(s,n,u,f,y)=>{let o=!1,h=!1;const E={name:s};if((!u||f)&&(F.isDirty&&(h=r.isDirty,r.isDirty=E.isDirty=x(),o=h!==E.isDirty),F.dirtyFields)){h=c(r.dirtyFields,s);const R=ie(c(a,s),n);R?M(r.dirtyFields,s):D(r.dirtyFields,s,!0),E.dirtyFields=r.dirtyFields,o=o||h!==!R}if(u){const R=c(r.touchedFields,s);R||(D(r.touchedFields,s,u),E.touchedFields=r.touchedFields,o=o||F.touchedFields&&R!==u)}return o&&y&&_.state.next(E),o?E:{}},A=(s,n,u,f)=>{const y=c(r.errors,s),o=F.isValid&&ae(n)&&r.isValid!==n;if(e.delayError&&u?(b=ue(()=>H(s,u)),b(e.delayError)):(clearTimeout(p),b=null,u?D(r.errors,s,u):M(r.errors,s)),(u?!ie(y,u):y)||!I(f)||o){const h={...f,...o&&ae(n)?{isValid:n}:{},errors:r.errors,name:s};r={...r,...h},_.state.next(h)}Y(!1)},m=async s=>await t.resolver(l,t.context,Mr(s||d.mount,i,t.criteriaMode,t.shouldUseNativeValidation)),V=async s=>{const{errors:n}=await m();if(s)for(const u of s){const f=c(n,u);f?D(r.errors,u,f):M(r.errors,u)}else r.errors=n;return n},S=async(s,n,u={valid:!0})=>{for(const f in s){const y=s[f];if(y){const{_f:o,...h}=y;if(o){const E=d.array.has(o.name),R=await Ie(y,c(l,o.name),P,t.shouldUseNativeValidation,E);if(R[o.name]&&(u.valid=!1,n))break;!n&&(c(R,o.name)?E?or(r.errors,R,o.name):D(r.errors,o.name,R[o.name]):M(r.errors,o.name))}h&&await S(h,n,u)}}return u.valid},z=()=>{for(const s of d.unMount){const n=c(i,s);n&&(n._f.refs?n._f.refs.every(u=>!Ue(u)):!Ue(n._f.ref))&&Fe(s)}d.unMount=new Set},x=(s,n)=>(s&&n&&D(l,s,n),!ie(de(),a)),w=(s,n,u)=>ur(s,d,{...g.mount?l:C(n)?a:J(s)?{[s]:n}:n},u),T=s=>ne(c(g.mount?l:a,s,e.shouldUnregister?c(a,s,[]):[])),L=(s,n,u={})=>{const f=c(i,s);let y=n;if(f){const o=f._f;o&&(!o.disabled&&D(l,s,hr(n,o)),y=Be&&je(o.ref)&&B(n)?"":n,dr(o.ref)?[...o.ref.options].forEach(h=>h.selected=y.includes(h.value)):o.refs?fe(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(y)?!!y.find(E=>E===h.value):y===h.value)):o.refs[0]&&(o.refs[0].checked=!!y):o.refs.forEach(h=>h.checked=h.value===y):We(o.ref)?o.ref.value="":(o.ref.value=y,o.ref.type||_.watch.next({name:s})))}(u.shouldDirty||u.shouldTouch)&&ee(s,y,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&re(s)},K=(s,n,u)=>{for(const f in n){const y=n[f],o=`${s}.${f}`,h=c(i,o);(d.array.has(s)||!ce(y)||h&&!h._f)&&!se(y)?K(o,y,u):L(o,y,u)}},q=(s,n,u={})=>{const f=c(i,s),y=d.array.has(s),o=N(n);D(l,s,o),y?(_.array.next({name:s,values:l}),(F.isDirty||F.dirtyFields)&&u.shouldDirty&&(r.dirtyFields=Le(a,l),_.state.next({name:s,dirtyFields:r.dirtyFields,isDirty:x(s,o)}))):f&&!f._f&&!B(o)?K(s,o,u):L(s,o,u),Pe(s,d)&&_.state.next({}),_.watch.next({name:s})},le=async s=>{const n=s.target;let u=n.name;const f=c(i,u),y=()=>n.type?Me(f._f):tr(s);if(f){let o,h;const E=y(),R=s.type===ge.BLUR||s.type===ge.FOCUS_OUT,xr=!Br(f._f)&&!t.resolver&&!c(r.errors,u)&&!f._f.deps||Pr(R,c(r.touchedFields,u),r.isSubmitted,k,Q),Ve=Pe(u,d,R);D(l,u,E),R?(f._f.onBlur&&f._f.onBlur(s),b&&b(0)):f._f.onChange&&f._f.onChange(s);const pe=ee(u,E,R,!1),Vr=!I(pe)||Ve;if(!R&&_.watch.next({name:u,type:s.type}),xr)return F.isValid&&G(),Vr&&_.state.next({name:u,...Ve?{}:pe});if(!R&&Ve&&_.state.next({}),Y(!0),t.resolver){const{errors:Ge}=await m([u]),pr=er(r.errors,i,u),ze=er(Ge,i,pr.name||u);o=ze.error,u=ze.name,h=I(Ge)}else o=(await Ie(f,c(l,u),P,t.shouldUseNativeValidation))[u],o?h=!1:F.isValid&&(h=await S(i,!0));!ce(E)||y()===E?(f._f.deps&&re(f._f.deps),A(u,h,o,pe)):Y(!1)}},re=async(s,n={})=>{let u,f;const y=j(s);if(Y(!0),t.resolver){const o=await V(C(s)?s:y);u=I(o),f=s?!y.some(h=>c(o,h)):u}else s?(f=(await Promise.all(y.map(async o=>{const h=c(i,o);return await S(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!f&&!r.isValid)&&G()):f=u=await S(i);return _.state.next({...!J(s)||F.isValid&&u!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:u}:{},errors:r.errors,isValidating:!1}),n.shouldFocus&&!f&&he(i,o=>o&&c(r.errors,o),s?y:d.mount),f},de=s=>{const n={...a,...g.mount?l:{}};return C(s)?n:J(s)?c(n,s):s.map(u=>c(n,u))},He=(s,n)=>({invalid:!!c((n||r).errors,s),isDirty:!!c((n||r).dirtyFields,s),isTouched:!!c((n||r).touchedFields,s),error:c((n||r).errors,s)}),_r=s=>{s?j(s).forEach(n=>M(r.errors,n)):r.errors={},_.state.next({errors:r.errors})},Ar=(s,n,u)=>{const f=(c(i,s,{_f:{}})._f||{}).ref;D(r.errors,s,{...n,ref:f}),_.state.next({name:s,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&f&&f.focus&&f.focus()},mr=(s,n)=>_e(s)?_.watch.subscribe({next:u=>s(w(void 0,n),u)}):w(s,n,!0),Fe=(s,n={})=>{for(const u of s?j(s):d.mount)d.mount.delete(u),d.array.delete(u),c(i,u)&&(n.keepValue||(M(i,u),M(l,u)),!n.keepError&&M(r.errors,u),!n.keepDirty&&M(r.dirtyFields,u),!n.keepTouched&&M(r.touchedFields,u),!t.shouldUnregister&&!n.keepDefaultValue&&M(a,u));_.watch.next({}),_.state.next({...r,...n.keepDirty?{isDirty:x()}:{}}),!n.keepIsValid&&G()},xe=(s,n={})=>{let u=c(i,s);const f=ae(n.disabled);return D(i,s,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:s}},name:s,mount:!0,...n}}),d.mount.add(s),u?f&&D(l,s,n.disabled?void 0:c(l,s,Me(u._f))):O(s,!0,n.value),{...f?{disabled:n.disabled}:{},...t.shouldUseNativeValidation?{required:!!n.required,min:oe(n.min),max:oe(n.max),minLength:oe(n.minLength),maxLength:oe(n.maxLength),pattern:oe(n.pattern)}:{},name:s,onChange:le,onBlur:le,ref:y=>{if(y){xe(s,n),u=c(i,s);const o=C(y.value)&&y.querySelectorAll&&y.querySelectorAll("input,select,textarea")[0]||y,h=Lr(o),E=u._f.refs||[];if(h?E.find(R=>R===o):o===u._f.ref)return;D(i,s,{_f:{...u._f,...h?{refs:[...E.filter(Ue),o,...Array.isArray(c(a,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),O(s,!1,void 0,o)}else u=c(i,s,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(sr(d.array,s)&&g.action)&&d.unMount.add(s)}}},Ke=()=>t.shouldFocusError&&he(i,s=>s&&c(r.errors,s),d.mount),br=(s,n)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let f=!0,y=N(l);_.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:o,values:h}=await m();r.errors=o,y=h}else await S(i);I(r.errors)?(_.state.next({errors:{},isSubmitting:!0}),await s(y,u)):(n&&await n({...r.errors},u),Ke())}catch(o){throw f=!1,o}finally{r.isSubmitted=!0,_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(r.errors)&&f,submitCount:r.submitCount+1,errors:r.errors})}},vr=(s,n={})=>{c(i,s)&&(C(n.defaultValue)?q(s,c(a,s)):(q(s,n.defaultValue),D(a,s,n.defaultValue)),n.keepTouched||M(r.touchedFields,s),n.keepDirty||(M(r.dirtyFields,s),r.isDirty=n.defaultValue?x(s,c(a,s)):x()),n.keepError||(M(r.errors,s),F.isValid&&G()),_.state.next({...r}))},Fr=(s,n={})=>{const u=s||a,f=N(u),y=s&&!I(s)?f:a;if(n.keepDefaultValues||(a=u),!n.keepValues){if(n.keepDirtyValues)for(const o of d.mount)c(r.dirtyFields,o)?D(y,o,c(l,o)):q(o,c(y,o));else{if(Be&&C(s))for(const o of d.mount){const h=c(i,o);if(h&&h._f){const E=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(je(E)){const R=E.closest("form");if(R){R.reset();break}}}}i={}}l=e.shouldUnregister?n.keepDefaultValues?N(a):{}:f,_.array.next({values:y}),_.watch.next({values:y})}d={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},g.mount=!F.isValid||!!n.keepIsValid,g.watch=!!e.shouldUnregister,_.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!!(n.keepDefaultValues&&!ie(s,a)),isSubmitted:n.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&s?Le(a,s):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:xe,unregister:Fe,getFieldState:He,_executeSchema:m,_focusError:Ke,_getWatch:w,_getDirty:x,_updateValid:G,_removeUnmounted:z,_updateFieldArray:$,_getFieldArray:T,_subjects:_,_proxyFormState:F,get _fields(){return i},get _formValues(){return l},get _stateFlags(){return g},set _stateFlags(s){g=s},get _defaultValues(){return a},get _names(){return d},set _names(s){d=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:re,register:xe,handleSubmit:br,watch:mr,setValue:q,getValues:de,reset:(s,n)=>Fr(_e(s)?s(l):s,n),resetField:vr,clearErrors:_r,unregister:Fe,setError:Ar,setFocus:(s,n={})=>{const u=c(i,s),f=u&&u._f;if(f){const y=f.refs?f.refs[0]:f.ref;y.focus&&(y.focus(),n.shouldSelect&&y.select())}},getFieldState:He}}function Gr(e={}){const t=v.useRef(),[r,i]=v.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...jr(e),formState:r});const a=t.current.control;return a._options=e,ve({subject:a._subjects.state,callback:v.useCallback(l=>{ar(l,a._proxyFormState,!0)&&(a._formState={...a._formState,...l},i({...a._formState}))},[a])}),v.useEffect(()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()}),v.useEffect(()=>{r.submitCount&&a._focusError()},[a,r.submitCount]),t.current.formState=ir(r,a),t.current}export{Hr as C,Kr as a,Gr as u};
