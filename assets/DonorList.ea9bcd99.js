import{bi as x,bj as D,aI as g,b as w,aT as i,bc as y,b$ as L}from"./vendor.5ecbfc3b.js";import{a as R}from"./vendor_axios.5abceb0c.js";import{M as S,c as j}from"./index.48474fd0.js";import"./vendor_core_js_pure.42317256.js";import"./vendor_react_epic_spinners.391a1898.js";import"./vendor_mui_datatables.cb4acd6b.js";import"./vendor_lodash.e638c0fa.js";import"./vendor_react_slick.f5eccc0b.js";import"./vendor_react_easy_edit.a45942fe.js";import"./vendor_react_player.581c7f95.js";const I="https://join.navgurukul.org/api/",N=[{name:"id",label:"S.No",options:{filter:!0,sort:!0,customBodyRender:(s,e)=>e.rowIndex+1}},{name:"donor",label:"Name",options:{filter:!0,sort:!0,customBodyRender:(s,e)=>{const a=`/donor/${e.rowData[0]}/students`;return i(L,{to:a,style:{color:"#f05f40"},children:s})}}}],T=()=>{const{roles:s}=x(o=>o.auth),e=D(),n=()=>e(j(!1)),[a,l]=g.useState({data:[],showLoader:!0}),u=async o=>{var c;try{const r=s.find(t=>t.role==="Donor"),f=((c=r==null?void 0:r.access)==null?void 0:c.map(t=>t.access))||[],h=`${I}donors`,d=await R.get(h,{signal:o}),b=s.findIndex(t=>t.role==="Admin");l({...a,data:b!==-1?d.data:d.data.filter(t=>f.includes(t.id)),showLoader:!1})}catch{}};w.exports.useEffect(()=>{const o=new AbortController;return(async()=>u(o.signal))(),n(),()=>o.abort()},[]);const{data:m,showLoader:p}=a;return i(y,{maxWidth:"sm",children:i(S,{title:"Donors Name",columns:N,data:m,showLoader:p})})};export{T as default};
