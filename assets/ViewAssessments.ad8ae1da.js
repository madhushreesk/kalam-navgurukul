import{ba as x,bh as U,aI as r,bb as f,bk as A,aT as t,cn as _,bU as S,bs as v,b$ as B,cG as L,bF as T}from"./vendor.5ecbfc3b.js";import{M as I}from"./vendor_mui_datatables.cb4acd6b.js";import{a as w}from"./vendor_axios.5abceb0c.js";import{R as M}from"./vendor_react_json_view.741f6318.js";import{t as D}from"./index.48474fd0.js";import"./vendor_core_js_pure.42317256.js";import"./vendor_lodash.e638c0fa.js";import"./vendor_react_epic_spinners.391a1898.js";import"./vendor_react_slick.f5eccc0b.js";import"./vendor_react_easy_edit.a45942fe.js";import"./vendor_react_player.581c7f95.js";const k="https://join.navgurukul.org/api/",j=x(s=>({innerTable:{marginLeft:"3vw",marginRight:"3vw",width:"94vw",marginTop:"5",marginBottom:"5",[s.breakpoints.up("md")]:{margin:"auto",width:"50%",marginTop:5,marginBottom:5}},clear:{clear:"both"}})),F=()=>({marginLeft:"auto",marginRight:"auto",maxWidth:"85vh",backgroundColor:"white",border:"2px solid rgb(0, 0, 0)",marginTop:"4vw",overflow:"auto",maxHeight:"92vh",padding:"20px"}),z=({partnerId:s,assessmentId:d})=>{const g=j(),{enqueueSnackbar:p}=U(),[m,u]=r.useState(!1),[i,c]=r.useState(null),h=async a=>{try{if(a){const n=`${k}partners/${s}/assessments/${d}/attempts`,l=await w.post(n,{csvUrl:a});l.data.errors!==void 0?c(l.data):p("successfully uploaded csv file!",{variant:"success"}),u(!1)}}catch{p("Internal Server Error",{variant:"error"})}},b=()=>{if(typeof i=="object")return f("div",{children:[t("h3",{style:{color:"green",textAlign:"center"},children:"Please coreect your csv file according to the detailsErrors and answerErrors using following instructions."}),t(M,{src:i})]})},y=async a=>{const n=`${k}general/upload_file/answerCSV`,l=new FormData;l.append("file",a);const R={headers:{"content-type":"multipart/form-data"}};return w.post(n,l,R)},e=async a=>{y(a).then(n=>{try{n.data.errors===void 0?h(n.data.fileUrl):alert("It is enternal server error please refresh the page.")}catch(l){console.error(l)}})},o=async a=>{u(!0),await e(a.target.files[0])},$=()=>c(null),C=F();return f(A,{children:[f("div",{style:{padding:"10px"},children:[t("h3",{children:"File Upload"}),t("input",{type:"file",accept:".csv",onChange:o,style:{color:"green"}}),t(_,{size:35,spinnerColor:"#ed343d",spinnerWidth:5,visible:m,style:{padding:"10px"}})]}),t(S,{open:!!i,onClose:$,children:t("div",{style:C,className:g.errors,children:b()})})]})},E="https://join.navgurukul.org/api/",H=()=>({top:`${54}%`,left:`${50}%`,transform:`translate(-${54}%, -${50}%)`,overflowY:"scroll",maxHeight:"80vh",width:"75%"}),N=x(s=>({paper:{position:"absolute",marginLeft:"3vw",marginRight:"3vw",width:"94vw",[s.breakpoints.up("md")]:{margin:"auto",width:"50%"},backgroundColor:s.palette.background.paper,boxShadow:s.shadows[5],padding:s.spacing(4),outline:"none"}})),Z=({partnerId:s})=>{const d=N(),[g,p]=r.useState([]),[m,u]=r.useState(!1),i=[{label:"ID",name:"id",options:{filter:!1}},{label:"Name",name:"name",options:{filter:!1}},{label:"Assessment URL",name:"assessment_url",options:{filter:!1,customBodyRender:r.useCallback(e=>e?t("a",{target:"_blank",rel:"noreferrer",href:e,children:t(v,{variant:"text",size:"small",color:"primary",children:"Link to Assessment"})}):null,[])}},{label:"Answer Key URL",name:"answer_key_url",options:{filter:!1,customBodyRender:r.useCallback(e=>e?[]:null)}},{label:"Question Set ID",name:"question_set_id",options:{filter:!1,customBodyRender:r.useCallback(e=>{const o=`/partner/${s}/assessments/${e}`;return t(B,{to:o,children:t(v,{variant:"text",color:"primary",size:"small",children:e})})},[])}},{label:"Created At",name:"created_at",options:{filter:!1}},{label:"Upload Data",name:"partner_id",options:{filter:!1,customBodyRender:r.useCallback((e,o)=>t(z,{partnerId:e,assessmentId:o.rowData[0]}),[])}}],c=()=>u(e=>!e),h=async()=>{try{const e=`${E}partners/${s}/assessments`,o=await w.get(e);p(o.data.data)}catch(e){console.error(e)}},b=()=>{h(),c()},y=H();return m?t(S,{open:m,onClose:c,children:t(T,{style:y,className:d.paper,children:t(I,{title:"View Assessments",columns:i,data:g,icons:D,options:{exportButton:!0,pageSize:100,showTitle:!1,selectableRows:"none",toolbar:!1,filtering:!0,filter:!0,filterType:"dropdown",responsive:"vertical"},style:{maxWidth:"90%",margin:"0 auto",marginTop:25}})})}):f(v,{color:"primary",align:"right",onClick:b,children:[t(L,{color:"primary"}),"\xA0\xA0"]})};export{Z as default};
