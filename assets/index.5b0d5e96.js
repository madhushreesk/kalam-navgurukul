import{_ as M,K as d,L as q,O as et,H as at}from"./index.48474fd0.js";import{aI as g,ba as st,da as it,bj as nt,ca as rt,bi as B,b as c,bh as ot,bb as _,bc as lt,aT as s,bd as ct,db as mt,bs as C,dc as L,dd as w}from"./vendor.5ecbfc3b.js";import{a as h}from"./vendor_axios.5abceb0c.js";import{u as ut}from"./vendor_react_hook_form.882a249a.js";import"./vendor_react_epic_spinners.391a1898.js";import"./vendor_mui_datatables.cb4acd6b.js";import"./vendor_lodash.e638c0fa.js";import"./vendor_react_slick.f5eccc0b.js";import"./vendor_react_easy_edit.a45942fe.js";import"./vendor_react_player.581c7f95.js";import"./vendor_core_js_pure.42317256.js";const dt=g.lazy(()=>M(()=>import("./index.0624f76d.js"),["assets/index.0624f76d.js","assets/vendor.5ecbfc3b.js","assets/vendor.e8bc3cfc.css","assets/vendor_core_js_pure.42317256.js","assets/vendor_react_hook_form.882a249a.js"])),_t=g.lazy(()=>M(()=>import("./index.cb4cec6b.js"),["assets/index.cb4cec6b.js","assets/vendor.5ecbfc3b.js","assets/vendor.e8bc3cfc.css","assets/vendor_core_js_pure.42317256.js","assets/vendor_axios.5abceb0c.js","assets/vendor_react_hook_form.882a249a.js","assets/index.48474fd0.js","assets/index.aa1dc235.css","assets/vendor_react_epic_spinners.391a1898.js","assets/vendor_mui_datatables.cb4acd6b.js","assets/vendor_lodash.e638c0fa.js","assets/vendor_react_slick.f5eccc0b.js","assets/vendor_react_easy_edit.a45942fe.js","assets/vendor_react_player.581c7f95.js"])),ht=st(i=>({root:{paddingTop:i.spacing(4),paddingBottom:i.spacing(2),display:"flex",flexDirection:"column",textAlign:"center"},container:{maxWidth:500,backgroundColor:i.palette.background.default},spacing:{paddingBottom:i.spacing(.5)},text:{marginTop:i.spacing(.5)},date:{maxWidth:400,paddingTop:i.spacing(-2),paddingBottom:i.spacing(1)}})),It=()=>{const i=ht(),N=it(),j=nt(),k=rt(),{studentData:V,enrollmentKey:y,studentId:p="",partner:r}=B(t=>t.onlineTest),{lang:f}=B(t=>t.ui),{firstName:z,middleName:U,lastName:R,mobileNumber:W}=V||{firstName:null,middleName:null,lastName:null,mobileNumber:null},{register:S,handleSubmit:H,formState:{errors:P},control:x,setValue:K,watch:G,reset:J}=ut(),[m,Q]=c.exports.useState(!1),[n,E]=c.exports.useState(0),{enqueueSnackbar:u}=ot(),[a,b]=c.exports.useState({ProfileImage:"",FirstName:z||"",MiddleName:U||"",email:"",LastName:R||"",whatsapp:W||"",AlternateNumber:"",gender:"",dob:"",gps_lat:"-1",gps_long:"-1",PrevImage:"",district:"",pin_code:"",state:"",city:"",current_status:"",qualification:"",school_medium:"",caste:"",religion:"",math_marks_in10th:"",percentage_in10th:"",math_marks_in12th:"",percentage_in12th:""}),X=t=>{const e=new FormData;e.append("file",t),h.post(`${d}on_assessment/details/photo/${y}`,e).then(()=>{u("Photo Uploaded Successfully",{variant:"success"})}).catch(()=>{u("Please Provide Valid Image File",{variant:"error"})})},Y=t=>{b({...a,ProfileImage:t}),X(t)},F={1:"female",2:"male",3:"other"},I=["","obc","scSt","general","others"],$=["","lessThan10th","class10th","class12th","graduate","ba","bcom","mcom","msc","bca","bsc","bba"],A=["","hindu","islam","sikh","jain","christian","others"],O=["","nothing","job","study","other"],T=["","en","other"];c.exports.useEffect(()=>{},[]),c.exports.useEffect(()=>{p&&h.get(`${d}/students/${p}`).then(t=>{if(t.data.data.length>0){const e=t.data.data[0];Q(!0),b({...a,PrevImage:e.image_url,FirstName:e.name.split(" ")[0],MiddleName:e.name.split(" ")[1],LastName:e.name.split(" ")[2],email:e.email,whatsapp:e.contacts[0].mobile,AlternateNumber:e.contacts[1]&&e.contacts[1].alt_mobile,dob:e.dob,gender:F[e.gender],district:e.district,pin_code:e.pin_code,state:e.state,city:e.city,current_status:O[e.current_status],qualification:$[e.qualification],school_medium:T[e.school_medium],caste:I[e.caste],religion:A[e.religon],math_marks_in10th:e.math_marks_in10th,percentage_in10th:e.percentage_in10th,math_marks_in12th:e.math_marks_in12th,percentage_in12th:e.percentage_in12th}),J({PrevImage:e.image_url,FirstName:e.name.split(" ")[0],MiddleName:e.name.split(" ")[1],LastName:e.name.split(" ")[2],email:e.email,whatsapp:e.contacts[0].mobile,AlternateNumber:e.contacts[1]&&e.contacts[1].alt_mobile,dob:e.dob,gender:F[e.gender],district:e.district,pin_code:e.pin_code,state:e.state,city:e.city,current_status:O[e.current_status],qualification:$[e.qualification],school_medium:T[e.school_medium],caste:I[e.caste],religion:A[e.religon],math_marks_in10th:e.math_marks_in10th,percentage_in10th:e.percentage_in10th,math_marks_in12th:e.math_marks_in12th,percentage_in12th:e.percentage_in12th})}})},[]);const o=(()=>[{en:"Basic Details",hi:"\u092C\u0941\u0928\u093F\u092F\u093E\u0926\u0940 \u091C\u093E\u0928\u0915\u093E\u0930\u0940",ma:"\u092E\u0942\u0932\u092D\u0942\u0924 \u092E\u093E\u0939\u093F\u0924\u0940"},{en:"Other Details",hi:"\u0905\u0928\u094D\u092F \u091C\u093E\u0928\u0915\u093E\u0930\u0940",ma:"\u0907\u0924\u0930 \u092E\u093E\u0939\u093F\u0924\u0940"}])(),Z=t=>{const e={name:t.name,email:t.email,whatsapp:t.whatsapp,dob:t.dob,gender:t.gender,gps_lat:t.gps_lat,gps_long:t.gps_long,partner_refer:t.partner_refer,qualification:t.qualification,state:t.state,district:t.district,city:t.city,current_status:t.current_status,school_medium:t.school_medium,pin_code:t.pin_code,caste:t.caste,religon:t.religion,percentage_in10th:t.percentage_in10th?t.percentage_in10th:"",math_marks_in10th:t.math_marks_in10th,math_marks_in12th:t.math_marks_in12th,percentage_in12th:t.percentage_in12th?t.percentage_in12th:""};t.alt_mobile&&(e.alt_mobile=t.alt_mobile),m?h.put(`${d}students/updateDetails/${p}`,{gender:t.gender,gps_lat:t.gps_lat,gps_long:t.gps_long,partner_refer:t.partner_refer,qualification:t.qualification,state:t.state,district:t.district,city:t.city,current_status:t.current_status,school_medium:t.school_medium,pin_code:t.pin_code,caste:t.caste,religon:t.religion,percentage_in10th:"string",math_marks_in10th:0,percentage_in12th:"string",math_marks_in12th:0}).then(()=>{k("/test/finalinstruction/",{})}):h.post(`${d}on_assessment/details/${y}`,e).then(l=>{j(at(l.data.details.id)),k("/test/finalinstruction/",{})}).catch(()=>{u("Please fill all the fields properly",{variant:"error"})})},v=(t,e)=>{if(e.preventDefault(),b(l=>({...l,...t})),n===0&&!a.PrevImage&&!a.ProfileImage){u("Please provide a Profile Picture",{variant:"error"});return}if(n>=o.length-1){Z({name:`${t.FirstName} ${t.MiddleName} ${t.LastName}`,alt_mobile:t.AlternateNumber,partner_refer:"NONE",image_url:a.ProfileImage,gps_lat:a.gps_lat?a.gps_lat:"",gps_long:a.gps_long?a.gps_lat:"",math_marks_in10th:a.math_marks_in10th?a.math_marks_in10th:"",math_marks_in12th:a.math_marks_in12th?a.math_marks_in12th:"",...t});return}E(l=>l+1)},D=()=>{E(t=>t-1)},tt=t=>{switch(t){case 0:return s(g.Suspense,{fallback:s(q,{}),children:s(dt,{lang:f,formData:a,reactForm:{register:S,errors:P,control:x},inputDisabled:m,pfpCompulsion:!et.includes(r==null?void 0:r.slug),setProfileImage:Y})});case 1:return s(g.Suspense,{fallback:s(q,{}),children:s(_t,{formData:{name:`${a.FirstName} ${a.MiddleName} ${a.LastName}`,alt_mobile:a.AlternateNumber,partner_refer:"NONE",image_url:a.ProfileImage,...a},reactForm:{register:S,errors:P,control:x,watch:G,setValue:K},lang:f,alreadyAUser:m,partnerSlug:r==null?void 0:r.slug,inputDisabled:m})});default:return s("div",{})}};return _(lt,{className:i.root,maxWidth:"sm",children:[s(ct,{variant:"h5",className:i.text,children:o[n][f]}),_("form",{style:{paddingTop:"2.0rem"},noValidate:!0,onSubmit:H(v),children:[tt(n),s(mt,{style:{marginTop:"1.6rem"},variant:"dots",position:"static",steps:o.length,activeStep:n,nextButton:_(C,{size:"medium",type:"submit",variant:n===o.length-1?"contained":"text",color:"primary",children:[n===o.length-1?"Submit Data":"Next",N.direction==="rtl"?s(L,{}):s(w,{})]}),backButton:_(C,{size:"medium",onClick:D,disabled:n===0,children:[N.direction==="rtl"?s(w,{}):s(L,{}),"Back"]})})]})]})};export{It as default};
